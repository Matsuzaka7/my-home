(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-26fe710f"],{"373e":function(t,e,a){"use strict";var r=a("3d0a"),n=a("cbc5"),i=a("82bf"),o=a("5344"),l=a("c0b7"),s=a("ec9b"),c=a("55ed"),u=a("1f87"),d=a("2018"),f=d("splice"),p=n.TypeError,h=Math.max,m=Math.min,b=9007199254740991,g="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!f},{splice:function(t,e){var a,r,n,d,f,v,w=s(this),y=l(w),I=i(t,y),k=arguments.length;if(0===k?a=r=0:1===k?(a=0,r=y-I):(a=k-2,r=m(h(o(e),0),y-I)),y+a-r>b)throw p(g);for(n=c(w,r),d=0;d<r;d++)f=I+d,f in w&&u(n,d,w[f]);if(n.length=r,a<r){for(d=I;d<y-r;d++)f=d+r,v=d+a,f in w?w[v]=w[f]:delete w[v];for(d=y;d>y-r+a;d--)delete w[d-1]}else if(a>r)for(d=y-r;d>I;d--)f=d+r-1,v=d+a-1,f in w?w[v]=w[f]:delete w[v];for(d=0;d<a;d++)w[d+I]=arguments[d+2];return w.length=y-r+a,n}})},"9f47":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{staticStyle:{margin:"20px 0"}},[a("categorySelect",{attrs:{show:!t.isShowTable},on:{getCategoryId:t.getCategoryId}})],1),a("el-card",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowTable,expression:"isShowTable"}]},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",disabled:!t.category3Id},on:{click:t.addAttr}},[t._v("添加属性")]),a("el-table",{staticStyle:{width:"100"},attrs:{border:"",data:t.attrList}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80",align:"center"}}),a("el-table-column",{attrs:{prop:"attrName",label:"属性名称",width:"150"}}),a("el-table-column",{attrs:{prop:"prop",label:"属性值列表",width:"width"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;e.$index;return t._l(r.attrValueList,(function(e,r){return a("el-tag",{key:e.id,staticStyle:{margin:"0px 10px"},attrs:{type:"success"}},[t._v(t._s(e.valueName))])}))}}])}),a("el-table-column",{attrs:{prop:"prop",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;e.$index;return[a("el-button",{attrs:{type:"warning",icon:"el-icon-edit",size:"mini"},on:{click:function(e){return t.updateAttr(r)}}},[t._v("修改 ")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"}},[t._v("删除 ")])]}}])})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.isShowTable,expression:"!isShowTable"}]},[a("el-form",{ref:"form",attrs:{inline:!0,"label-width":"80px",model:t.attrInfo}},[a("el-form-item",{attrs:{label:"属性名"}},[a("el-input",{attrs:{placeholder:"请输入属性名"},model:{value:t.attrInfo.attrName,callback:function(e){t.$set(t.attrInfo,"attrName",e)},expression:"attrInfo.attrName"}})],1)],1),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",disabled:!t.attrInfo.attrName},on:{click:t.addAttrValue}},[t._v("添加属性值")]),a("el-button",{on:{click:function(e){t.isShowTable=!0}}},[t._v("取消")]),a("el-table",{staticStyle:{width:"100%",margin:"20px 0"},attrs:{border:"",data:t.attrInfo.attrValueList}},[a("el-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"80"}}),a("el-table-column",{attrs:{prop:"prop",label:"属性值名称",width:"width"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row,n=e.$index;return[r.flag?a("el-input",{ref:n,attrs:{placeholder:"请输入属性值名称",size:"mini"},on:{blur:function(e){return t.toLook(r,n)}},nativeOn:{keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;r.flag=!1}},model:{value:r.valueName,callback:function(e){t.$set(r,"valueName",e)},expression:"row.valueName"}}):t._e(),r.flag?t._e():a("div",{on:{blur:function(e){return t.toLook(r,n)},click:function(e){return t.toEdit(r,n)}}},[t._v(" "+t._s(r.valueName)+" ")])]}}])}),a("el-table-column",{attrs:{prop:"prop",label:"操作",width:"width"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row,n=e.$index;return[a("el-popconfirm",{attrs:{title:"确定删除"+r.valueName+"吗？"},on:{onConfirm:function(e){return t.deleteAttrValue(n)}}},[a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",size:"mini"},slot:"reference"},[t._v("删除")])],1)]}}])})],1),a("el-button",{attrs:{type:"primary",disabled:t.attrInfo.attrValueList.length<1},on:{click:t.addOrUpdateAttr}},[t._v("保存")]),a("el-button",{on:{click:function(e){t.isShowTable=!0}}},[t._v("取消")])],1)])],1)},n=[],i=a("291b"),o=(a("f150"),a("7e5a"),a("882b"),a("373e"),a("b2df"),a("e186"),{name:"attr",data:function(){return{flag:!0,category1Id:"",category2Id:"",category3Id:"",attrList:[],isShowTable:!0,attrInfo:{attrName:"",attrValueList:[],categoryId:0,categoryLevel:3}}},methods:{getCategoryId:function(t){this.category1Id=t.category1Id,this.category2Id=t.category2Id,this.category3Id=t.category3Id,this.getAttrList()},getAttrList:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,r,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.category1Id,r=t.category2Id,n=t.category3Id,e.next=3,t.$API.attr.reqAttrList(a,r,n);case 3:i=e.sent,200===i.code&&(t.attrList=i.data);case 5:case"end":return e.stop()}}),e)})))()},addAttrValue:function(){var t=this;this.attrInfo.attrValueList.push({attrId:this.attrInfo.id,valueName:"",flag:!0}),this.$nextTick((function(){t.$refs[t.attrInfo.attrValueList.length-1].focus()}))},addAttr:function(){this.isShowTable=!1,this.attrInfo={attrName:"",attrValueList:[],categoryId:this.category3Id,categoryLevel:3}},updateAttr:function(t){var e=this;this.isShowTable=!1,this.attrInfo=JSON.parse(JSON.stringify(t)),this.attrInfo.attrValueList.forEach((function(t){e.$set(t,"flag",!1)}))},toLook:function(t,e){if(""==t.valueName)return this.$message("不能为空"),void this.$refs[e].focus();var a=this.attrInfo.attrValueList.some((function(e){if(t!==e)return t.valueName==e.valueName}));if(a)return!0;t.flag=!1},toEdit:function(t,e){var a=this;t.flag=!0,this.$nextTick((function(){a.$refs[e].focus()}))},deleteAttrValue:function(t){this.attrInfo.attrValueList.splice(t,1)},addOrUpdateAttr:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.attrInfo.attrValueList=t.attrInfo.attrValueList.filter((function(t){if(""!=t.valueName)return delete t.flag,!0})),e.prev=1,e.next=4,t.$API.attr.reqAddOrUpdateAttr(t.attrInfo);case 4:t.isShowTable=!0,t.$message.success("保存成功"),t.getAttrList(),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),t.isShowTable=!0;case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))()}}}),l=o,s=a("cba8"),c=Object(s["a"])(l,r,n,!1,null,null,null);e["default"]=c.exports}}]);