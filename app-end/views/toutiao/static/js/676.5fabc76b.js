"use strict";(self["webpackChunkheadline"]=self["webpackChunkheadline"]||[]).push([[676],{8682:function(t,e,s){s.d(e,{Z:function(){return l}});var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"error-wrap"},[s("van-image",{staticClass:"img",attrs:{src:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fpic.soutu123.cn%2Felement_origin_min_pic%2F17%2F02%2F28%2F8e959816807d2a8b3796c76270ace890.jpg%21%2Ffw%2F700%2Fquality%2F90%2Funsharp%2Ftrue%2Fcompress%2Ftrue&refer=http%3A%2F%2Fpic.soutu123.cn&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1659079604&t=2842b0d4ce5043d9e3c96c369d0eb77f",fit:"contain"}})],1)},r=[],o={name:"NoData"},a=o,i=s(1001),u=(0,i.Z)(a,n,r,!1,null,"358f0f42",null),l=u.exports},9676:function(t,e,s){s.r(e),s.d(e,{default:function(){return f}});var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("van-nav-bar",{attrs:{fixed:"","left-arrow":"",title:"我的关注"},on:{"click-left":function(e){return t.$router.back()}}}),t.isNoData?s("NoData"):s("van-cell-group",{staticClass:"container"},t._l(t.list,(function(e,n){return s("van-cell",{key:n,scopedSlots:t._u([{key:"title",fn:function(){return[s("van-image",{staticClass:"photo",attrs:{src:e.photo,fit:"cover",round:""}}),s("span",{staticClass:"name"},[t._v(t._s(e.name))])]},proxy:!0}],null,!0)},[[s("van-button",{staticClass:"follow-btn",attrs:{type:"info",size:"small",round:""},on:{click:function(s){return t.onFollow(e.id)}}},[t._t("default",(function(){return[t._v(" "+t._s("取消关注")+" ")]}))],2)]],2)})),1)],1)},r=[],o=s(5155),a=s(8682),i={name:"userFollowings",components:{NoData:a.Z},data(){return{list:[],isNoData:null}},methods:{async loadUserFollowings(){if(!this.$store.state.user)return this.$toast("您尚未登录!"),void this.$router.push("/login");this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0});try{const{data:t}=await(0,o.lQ)(),{results:e}=t.data;this.list=[],this.list.push(...e),this.$toast("加载完成 !"),0===this.list.length?this.isNoData=!0:this.isNoData=!1}catch(t){this.$toast("发生未知错误 ! 请重试")}},async onFollow(t){this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0});try{await(0,o.zM)(t),this.$toast("取消关注成功"),this.list=[],this.loadUserFollowings()}catch(e){let t="发生未知错误 ! 请稍后重试";e.response&&400===e.response.status?t="你不能关注你自己!":e.response&&401===e.response.status&&(t="您尚未登录!"),this.$toast(t)}}},created(){this.loadUserFollowings()},activated(){this.loadUserFollowings()}},u=i,l=s(1001),c=(0,l.Z)(u,n,r,!1,null,"0567f74c",null),f=c.exports},5155:function(t,e,s){s.d(e,{Ci:function(){return i},Lj:function(){return f},Q6:function(){return o},R3:function(){return u},W9:function(){return d},X5:function(){return p},bG:function(){return a},dX:function(){return m},et:function(){return c},lQ:function(){return v},qi:function(){return h},x4:function(){return r},zM:function(){return l}});var n=s(8029);s(4901);const r=t=>(0,n.Z)({method:"POST",url:"/v1_0/authorizations",data:t}),o=t=>(0,n.Z)({method:"GET",url:`/v1_0/sms/codes/${t}`}),a=()=>(0,n.Z)({method:"GET",url:"/v1_0/user"}),i=()=>(0,n.Z)({method:"GET",url:"/v1_0/user/channels"}),u=t=>(0,n.Z)({method:"POST",url:"/v1_0/user/followings",data:{target:t}}),l=t=>(0,n.Z)({method:"DELETE",url:`/v1_0/user/followings/${t}`}),c=()=>(0,n.Z)({method:"GET",url:"/v1_0/user/profile"}),f=t=>(0,n.Z)({method:"PATCH",url:"/v1_0/user/profile",data:t}),d=t=>(0,n.Z)({method:"PATCH",url:"/v1_0/user/photo",data:t}),h=()=>(0,n.Z)({method:"GET",url:"/v1_0/article/collections"}),p=()=>(0,n.Z)({method:"GET",url:"/v1_0/user/histories",params:{page:1,per_page:200}}),m=()=>(0,n.Z)({method:"GET",url:"/v1_0/user/followers",params:{page:1,per_page:200}}),v=()=>(0,n.Z)({method:"GET",url:"/v1_0/user/followings",params:{page:1,per_page:200}})}}]);