"use strict";(self["webpackChunkheadline"]=self["webpackChunkheadline"]||[]).push([[525],{8456:function(t,e,r){r.d(e,{Z:function(){return c}});var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("van-button",{staticClass:"follow-btn",attrs:{type:t.value?"default":"info",size:"small",round:"",loading:t.followLoading},on:{click:t.onFollow}},[t._t("default",(function(){return[t._v(" "+t._s(t.value?"已关注":"关注")+" ")]}))],2)},s=[],n=r(5155),a={props:{value:{type:Boolean,required:!0},userId:{type:[Number,String,Object],required:!0}},name:"FollowUser",data(){return{followLoading:!1}},methods:{async onFollow(){this.followLoading=!0;try{this.value?(await(0,n.zM)(this.userId),this.$toast("取消关注")):(await(0,n.R3)(this.userId),this.$toast("关注成功")),this.$emit("input",!this.value)}catch(t){let e="发生未知错误 ! 请稍后重试";t.response&&400===t.response.status?e="你不能关注你自己!":t.response&&401===t.response.status&&(e="您尚未登录!"),this.$toast(e)}this.followLoading=!1}}},l=a,u=r(1001),i=(0,u.Z)(l,o,s,!1,null,"3bd8d9be",null),c=i.exports},8682:function(t,e,r){r.d(e,{Z:function(){return i}});var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"error-wrap"},[r("van-image",{staticClass:"img",attrs:{src:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fpic.soutu123.cn%2Felement_origin_min_pic%2F17%2F02%2F28%2F8e959816807d2a8b3796c76270ace890.jpg%21%2Ffw%2F700%2Fquality%2F90%2Funsharp%2Ftrue%2Fcompress%2Ftrue&refer=http%3A%2F%2Fpic.soutu123.cn&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1659079604&t=2842b0d4ce5043d9e3c96c369d0eb77f",fit:"contain"}})],1)},s=[],n={name:"NoData"},a=n,l=r(1001),u=(0,l.Z)(a,o,s,!1,null,"358f0f42",null),i=u.exports},8525:function(t,e,r){r.r(e),r.d(e,{default:function(){return f}});var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("van-nav-bar",{attrs:{fixed:"","left-arrow":"",title:"我的粉丝"},on:{"click-left":function(e){return t.$router.back()}}}),t.isNoData?r("NoData"):r("van-cell-group",{staticClass:"container"},t._l(t.list,(function(e,o){return r("van-cell",{key:o,scopedSlots:t._u([{key:"title",fn:function(){return[r("van-image",{staticClass:"photo",attrs:{src:e.photo,fit:"cover",round:""}}),r("span",{staticClass:"name"},[t._v(t._s(e.name))])]},proxy:!0}],null,!0)},[[r("FollowUser",{staticClass:"follow-btn",attrs:{userId:e.id},model:{value:e.mutual_follow,callback:function(r){t.$set(e,"mutual_follow",r)},expression:"item.mutual_follow"}})]],2)})),1)],1)},s=[],n=r(5155),a=r(8456),l=r(8682),u={name:"userFollowers",components:{FollowUser:a.Z,NoData:l.Z},data(){return{list:[],isNoData:null}},methods:{async loadUserFollowers(){if(!this.$store.state.user)return this.$toast("您尚未登录!"),void this.$router.push("/login");this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0});try{const{data:t}=await(0,n.dX)(),{results:e}=t.data;this.list=[],this.list.push(...e),this.$toast("加载完成 !"),0===this.list.length?this.isNoData=!0:this.isNoData=!1}catch(t){this.$toast("发生未知错误 ! 请重试")}}},created(){this.loadUserFollowers()},activated(){this.loadUserFollowers()}},i=u,c=r(1001),d=(0,c.Z)(i,o,s,!1,null,"0f92b721",null),f=d.exports},5155:function(t,e,r){r.d(e,{Ci:function(){return l},Lj:function(){return d},Q6:function(){return n},R3:function(){return u},W9:function(){return f},X5:function(){return p},bG:function(){return a},dX:function(){return m},et:function(){return c},lQ:function(){return v},qi:function(){return h},x4:function(){return s},zM:function(){return i}});var o=r(8029);r(4901);const s=t=>(0,o.Z)({method:"POST",url:"/v1_0/authorizations",data:t}),n=t=>(0,o.Z)({method:"GET",url:`/v1_0/sms/codes/${t}`}),a=()=>(0,o.Z)({method:"GET",url:"/v1_0/user"}),l=()=>(0,o.Z)({method:"GET",url:"/v1_0/user/channels"}),u=t=>(0,o.Z)({method:"POST",url:"/v1_0/user/followings",data:{target:t}}),i=t=>(0,o.Z)({method:"DELETE",url:`/v1_0/user/followings/${t}`}),c=()=>(0,o.Z)({method:"GET",url:"/v1_0/user/profile"}),d=t=>(0,o.Z)({method:"PATCH",url:"/v1_0/user/profile",data:t}),f=t=>(0,o.Z)({method:"PATCH",url:"/v1_0/user/photo",data:t}),h=()=>(0,o.Z)({method:"GET",url:"/v1_0/article/collections"}),p=()=>(0,o.Z)({method:"GET",url:"/v1_0/user/histories",params:{page:1,per_page:200}}),m=()=>(0,o.Z)({method:"GET",url:"/v1_0/user/followers",params:{page:1,per_page:200}}),v=()=>(0,o.Z)({method:"GET",url:"/v1_0/user/followings",params:{page:1,per_page:200}})}}]);