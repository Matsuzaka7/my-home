(self["webpackChunkheadline"]=self["webpackChunkheadline"]||[]).push([[525],{8456:function(t,e,r){"use strict";r.d(e,{Z:function(){return d}});var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("van-button",{staticClass:"follow-btn",attrs:{type:t.value?"default":"info",size:"small",round:"",loading:t.followLoading},on:{click:t.onFollow}},[t._t("default",(function(){return[t._v(" "+t._s(t.value?"已关注":"关注")+" ")]}))],2)},o=[],u=r(2646),a=r(2381),s=(r(9653),r(5155)),i={props:{value:{type:Boolean,required:!0},userId:{type:[Number,String,Object],required:!0}},name:"FollowUser",data:function(){return{followLoading:!1}},methods:{onFollow:function(){var t=this;return(0,a.Z)((0,u.Z)().mark((function e(){var r;return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.followLoading=!0,e.prev=1,!t.value){e.next=8;break}return e.next=5,(0,s.zM)(t.userId);case 5:t.$toast("取消关注"),e.next=11;break;case 8:return e.next=10,(0,s.R3)(t.userId);case 10:t.$toast("关注成功");case 11:t.$emit("input",!t.value),e.next=19;break;case 14:e.prev=14,e.t0=e["catch"](1),r="发生未知错误 ! 请稍后重试",e.t0.response&&400===e.t0.response.status?r="你不能关注你自己!":e.t0.response&&401===e.t0.response.status&&(r="您尚未登录!"),t.$toast(r);case 19:t.followLoading=!1;case 20:case"end":return e.stop()}}),e,null,[[1,14]])})))()}}},l=i,c=r(1001),f=(0,c.Z)(l,n,o,!1,null,"3bd8d9be",null),d=f.exports},8682:function(t,e,r){"use strict";r.d(e,{Z:function(){return l}});var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"error-wrap"},[r("van-image",{staticClass:"img",attrs:{src:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fpic.soutu123.cn%2Felement_origin_min_pic%2F17%2F02%2F28%2F8e959816807d2a8b3796c76270ace890.jpg%21%2Ffw%2F700%2Fquality%2F90%2Funsharp%2Ftrue%2Fcompress%2Ftrue&refer=http%3A%2F%2Fpic.soutu123.cn&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1659079604&t=2842b0d4ce5043d9e3c96c369d0eb77f",fit:"contain"}})],1)},o=[],u={name:"NoData"},a=u,s=r(1001),i=(0,s.Z)(a,n,o,!1,null,"358f0f42",null),l=i.exports},8525:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return v}});var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("van-nav-bar",{attrs:{fixed:"","left-arrow":"",title:"我的粉丝"},on:{"click-left":function(e){return t.$router.back()}}}),t.isNoData?r("NoData"):r("van-cell-group",{staticClass:"container"},t._l(t.list,(function(e,n){return r("van-cell",{key:n,scopedSlots:t._u([{key:"title",fn:function(){return[r("van-image",{staticClass:"photo",attrs:{src:e.photo,fit:"cover",round:""}}),r("span",{staticClass:"name"},[t._v(t._s(e.name))])]},proxy:!0}],null,!0)},[[r("FollowUser",{staticClass:"follow-btn",attrs:{userId:e.id},model:{value:e.mutual_follow,callback:function(r){t.$set(e,"mutual_follow",r)},expression:"item.mutual_follow"}})]],2)})),1)],1)},o=[],u=r(2646),a=r(3561),s=r(2381),i=r(5155),l=r(8456),c=r(8682),f={name:"userFollowers",components:{FollowUser:l.Z,NoData:c.Z},data:function(){return{list:[],isNoData:null}},methods:{loadUserFollowers:function(){var t=this;return(0,s.Z)((0,u.Z)().mark((function e(){var r,n,o,s;return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$store.state.user){e.next=4;break}return t.$toast("您尚未登录!"),t.$router.push("/login"),e.abrupt("return");case 4:return t.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),e.prev=5,e.next=8,(0,i.dX)();case 8:n=e.sent,o=n.data,s=o.data.results,t.list=[],(r=t.list).push.apply(r,(0,a.Z)(s)),t.$toast("加载完成 !"),0===t.list.length?t.isNoData=!0:t.isNoData=!1,e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](5),t.$toast("发生未知错误 ! 请重试");case 20:case"end":return e.stop()}}),e,null,[[5,17]])})))()}},created:function(){this.loadUserFollowers()},activated:function(){this.loadUserFollowers()}},d=f,p=r(1001),m=(0,p.Z)(d,n,o,!1,null,"0f92b721",null),v=m.exports},1038:function(t,e,r){var n=r(2109),o=r(8457),u=r(7072),a=!u((function(t){Array.from(t)}));n({target:"Array",stat:!0,forced:a},{from:o})},5155:function(t,e,r){"use strict";r.d(e,{Ci:function(){return s},Lj:function(){return f},Q6:function(){return u},R3:function(){return i},W9:function(){return d},X5:function(){return m},bG:function(){return a},dX:function(){return v},et:function(){return c},lQ:function(){return h},qi:function(){return p},x4:function(){return o},zM:function(){return l}});var n=r(8029),o=(r(4901),function(t){return(0,n.Z)({method:"POST",url:"/v1_0/authorizations",data:t})}),u=function(t){return(0,n.Z)({method:"GET",url:"/v1_0/sms/codes/".concat(t)})},a=function(){return(0,n.Z)({method:"GET",url:"/v1_0/user"})},s=function(){return(0,n.Z)({method:"GET",url:"/v1_0/user/channels"})},i=function(t){return(0,n.Z)({method:"POST",url:"/v1_0/user/followings",data:{target:t}})},l=function(t){return(0,n.Z)({method:"DELETE",url:"/v1_0/user/followings/".concat(t)})},c=function(){return(0,n.Z)({method:"GET",url:"/v1_0/user/profile"})},f=function(t){return(0,n.Z)({method:"PATCH",url:"/v1_0/user/profile",data:t})},d=function(t){return(0,n.Z)({method:"PATCH",url:"/v1_0/user/photo",data:t})},p=function(){return(0,n.Z)({method:"GET",url:"/v1_0/article/collections"})},m=function(){return(0,n.Z)({method:"GET",url:"/v1_0/user/histories",params:{page:1,per_page:200}})},v=function(){return(0,n.Z)({method:"GET",url:"/v1_0/user/followers",params:{page:1,per_page:200}})},h=function(){return(0,n.Z)({method:"GET",url:"/v1_0/user/followings",params:{page:1,per_page:200}})}},3561:function(t,e,r){"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function o(t){if(Array.isArray(t))return n(t)}r.d(e,{Z:function(){return i}});r(2526),r(1817),r(1539),r(2165),r(8783),r(3948),r(1038);function u(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}r(7042),r(8309),r(4916),r(7601);function a(t,e){if(t){if("string"===typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}r(1703);function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t){return o(t)||u(t)||a(t)||s()}}}]);