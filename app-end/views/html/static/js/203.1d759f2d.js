"use strict";(self["webpackChunkMatsuzaka"]=self["webpackChunkMatsuzaka"]||[]).push([[203],{5203:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"setting"},[a("div",{staticClass:"settingItem"},[a("h2",[e._v("全局主题")]),a("div",[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"跟随系统"},on:{change:e.changeSelect},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),a("div",{staticClass:"settingItem",staticStyle:{"align-items":"flex-start"}},[a("h2",[e._v("接口测试")]),a("div",{staticClass:"settingItemTest"},[a("div",{staticClass:"card"},[a("div",{staticClass:"settingItemTestTop"},[a("el-select",{staticClass:"settingItemTestSelect",attrs:{placeholder:"类型(GET)"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.ApiType,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-checkbox",{model:{value:e.SeverChecked,callback:function(t){e.SeverChecked=t},expression:"SeverChecked"}},[e._v("代理转发")]),a("el-checkbox",{model:{value:e.formDataChecked,callback:function(t){e.formDataChecked=t},expression:"formDataChecked"}},[e._v("formData")])],1)],1),a("el-autocomplete",{staticClass:"inline-input",attrs:{clearable:"","fetch-suggestions":e.querySearch,placeholder:"URL"},on:{change:e.ChangeSelect},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.item,s=t.$index;return[a("div",{staticClass:"name"},[e._v(" "+e._s(r.value)+" "),a("i",{staticClass:"el-icon-delete icon-delete",on:{click:function(t){return t.stopPropagation(),e.deleteList.apply(null,arguments)}}},[e._v(e._s(s))])])]}}]),model:{value:e.inputVal,callback:function(t){e.inputVal=t},expression:"inputVal"}}),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.ajaxData,expression:"ajaxData"}],staticClass:"data",attrs:{contenteditable:"true",placeholder:'\n          携带参数\n          格式:\n          1. 基本数据: "hello word"\n          \n          2. 引用数据:\n              {\n                "user": "admin",\n                "password": 123456\n              }'},domProps:{value:e.ajaxData},on:{input:function(t){t.target.composing||(e.ajaxData=t.target.value)}}}),a("button",{on:{click:e.subAjax}},[e._v("发送请求")])],1)])]),a("div",{staticClass:"settingItem"},[a("h2",[e._v("错误日志")]),a("div",{staticClass:"card",staticStyle:{"max-height":"200px",overflow:"scroll","padding-top":"10px"}},e._l(e.error,(function(t){return a("div",{staticClass:"errorItem"},[a("span",[e._v(e._s(e.timeFormat(t.time))+"：")]),a("p",[e._v(e._s(t.err))])])})),0)]),a("el-dialog",{staticClass:"dialog",attrs:{title:"结果",visible:e.centerDialogVisible,width:"85%","before-close":e.handleClose,"modal-append-to-body":!1},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.toast,expression:"toast"}],staticClass:"data",attrs:{contenteditable:"true"},domProps:{value:e.toast},on:{input:function(t){t.target.composing||(e.toast=t.target.value)}}})])],1)},s=[],n=a(6198),l=a(9431),i=a(9669),o=a.n(i),c={name:"Set",data:function(){return{centerDialogVisible:!1,restaurants:JSON.parse(localStorage.getItem("UrlList"))||[{value:"http://matsuzaka.top:404/login"}],value:localStorage.getItem("Global-theme"),type:"",inputVal:"",SeverChecked:!1,formDataChecked:!1,ajaxData:"",options:[{value:"跟随系统",label:"跟随系统"},{value:"深色",label:"深色"},{value:"浅色",label:"浅色"}],ApiType:[{value:"GET",label:"GET"},{value:"POST",label:"POST"},{value:"PUT",label:"PUT"},{value:"DELETE",label:"DELETE"}],toast:[],error:JSON.parse(localStorage.getItem("error"))||[]}},created:function(){this.timeFormat=l.i$},methods:{changeSelect:function(e){localStorage.setItem("Global-theme",e),this.$bus.$emit("setGlobalTheme",e)},subAjax:function(){var e=this;return(0,n.Z)(regeneratorRuntime.mark((function t(){var a,r,s,n,l,i,c,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a={url:e.inputVal,method:e.type||"GET"};try{for(n in r=new FormData,s=JSON.parse(e.ajaxData||"{}"),s)r.append(n,s[n]);"GET"==e.type||"DELETE"==e.type||""==e.type?e.formDataChecked&&e.SeverChecked?(a.params=e.ajaxData&&JSON.parse(e.ajaxData),a.fromData=!0):e.SeverChecked&&!e.formDataChecked?a.params=e.ajaxData&&JSON.parse(e.ajaxData):e.SeverChecked||e.formDataChecked?!e.SeverChecked&&e.formDataChecked&&(a.params=r):a.params=e.ajaxData&&JSON.parse(e.ajaxData):"POST"!=e.type&&"PUT"!=e.type||(e.formDataChecked&&e.SeverChecked?(a.data=e.ajaxData&&JSON.parse(e.ajaxData),a.fromData=!0):e.SeverChecked&&!e.formDataChecked?a.data=e.ajaxData&&JSON.parse(e.ajaxData):e.SeverChecked||e.formDataChecked?!e.SeverChecked&&e.formDataChecked&&(a.data=r):a.data=e.ajaxData&&JSON.parse(e.ajaxData))}catch(d){l=JSON.parse(localStorage.getItem("error"))||[],l.unshift({time:Date.now(),err:d.message}),e.error.unshift({time:Date.now(),err:d.message}),localStorage.setItem("error",JSON.stringify(l)),e.$message.error("参数格式有误")}if(t.prev=2,!e.SeverChecked){t.next=10;break}return t.next=6,e.$API.Setting.apiTest({options:a});case 6:i=t.sent,200===i.status?(e.toast=JSON.stringify(i.data,null,4),e.centerDialogVisible=!0):e.$message.error("请检查接口或接口类型"),t.next=14;break;case 10:return t.next=12,o()(a);case 12:c=t.sent,200===c.status?(e.toast=JSON.stringify(c.data,null,4),e.centerDialogVisible=!0):e.$message.error("可能跨域或接口地址和接口类型错误");case 14:t.next=23;break;case 16:t.prev=16,t.t0=t["catch"](2),u=JSON.parse(localStorage.getItem("error"))||[],u.unshift({time:Date.now(),err:t.t0.message}),e.error.unshift({time:Date.now(),err:t.t0.message}),localStorage.setItem("error",JSON.stringify(u)),e.$message.error("可能跨域或请求超时或请求地址不存在");case 23:case"end":return t.stop()}}),t,null,[[2,16]])})))()},createFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},querySearch:function(e,t){var a=this.restaurants,r=e?a.filter(this.createFilter(e)):a;t(r)},ChangeSelect:function(e){localStorage.getItem("UrlList")&&JSON.parse(localStorage.getItem("UrlList")).some((function(t){return t.value==e}))||(this.restaurants.push({value:e}),localStorage.setItem("UrlList",JSON.stringify(this.restaurants)))},deleteList:function(e){var t=this.restaurants.findIndex((function(t){return t.value===e.target.parentNode.innerText}));this.restaurants.splice(t,1),localStorage.setItem("UrlList",JSON.stringify(this.restaurants))},handleClose:function(e){this.centerDialogVisible=!1}}},u=c,d=a(1001),m=(0,d.Z)(u,r,s,!1,null,"eae06504",null),p=m.exports},6198:function(e,t,a){function r(e,t,a,r,s,n,l){try{var i=e[n](l),o=i.value}catch(c){return void a(c)}i.done?t(o):Promise.resolve(o).then(r,s)}function s(e){return function(){var t=this,a=arguments;return new Promise((function(s,n){var l=e.apply(t,a);function i(e){r(l,s,n,i,o,"next",e)}function o(e){r(l,s,n,i,o,"throw",e)}i(void 0)}))}}a.d(t,{Z:function(){return s}})}}]);